# Z-ĞĞ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… Ğ´ĞµÑ„ĞµĞºÑ‚Ğ¾Ğ² Ğ² Swift-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ…

## 1. Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¸ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ°

```
[NAME]           -- Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ Ğ²ÑĞµÑ… Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²
[SOURCE_CODE]    -- Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°
[INSTRUCTION]    -- Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¹

â„•                -- Ğ½Ğ°Ñ‚ÑƒÑ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‡Ğ¸ÑĞ»Ğ°
â„                -- Ğ²ĞµÑ‰ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ñ‡Ğ¸ÑĞ»Ğ°
ğ”¹ ::= true | false
```

## 2. Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ ĞºĞ¾Ğ´Ğ°

### 2.1 ĞšĞ»Ğ°ÑÑ (Class)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Class                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ name : NAME                                                  â”‚
â”‚ methods : â„™ Method                                           â”‚
â”‚ attributes : â„™ Attribute                                     â”‚
â”‚ parent : Class âˆª {âˆ…}                                         â”‚
â”‚ protocols : â„™ Protocol                                       â”‚
â”‚ accessLevel : AccessLevel                                    â”‚
â”‚ loc : â„•                                                      â”‚
â”‚ isViewController : ğ”¹                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ loc > 0                                                      â”‚
â”‚ name â‰  âˆ…                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AccessLevel ::= private | fileprivate | internal | public | open
```

### 2.2 ĞœĞµÑ‚Ğ¾Ğ´ (Method)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Method                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ name : NAME                                                  â”‚
â”‚ parameters : seq Parameter                                   â”‚
â”‚ returnType : Type                                            â”‚
â”‚ accessLevel : AccessLevel                                    â”‚
â”‚ instructions : seq INSTRUCTION                               â”‚
â”‚ loc : â„•                                                      â”‚
â”‚ cyclomaticComplexity : â„•                                     â”‚
â”‚ accessedAttributes : â„™ Attribute                             â”‚
â”‚ calledMethods : â„™ Method                                     â”‚
â”‚ foreignDataAccess : â„™ Attribute                              â”‚
â”‚ nestingDepth : â„•                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ loc â‰¥ 1                                                      â”‚
â”‚ cyclomaticComplexity â‰¥ 1                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚ (Attribute)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Attribute                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ name : NAME                                                  â”‚
â”‚ type : Type                                                  â”‚
â”‚ accessLevel : AccessLevel                                    â”‚
â”‚ isComputed : ğ”¹                                               â”‚
â”‚ hasGetter : ğ”¹                                                â”‚
â”‚ hasSetter : ğ”¹                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 ĞŸÑ€Ğ¾ĞµĞºÑ‚ (Project)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SwiftProject                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ classes : â„™ Class                                            â”‚
â”‚ protocols : â„™ Protocol                                       â”‚
â”‚ extensions : â„™ Extension                                     â”‚
â”‚ dependencies : Class â†” Class                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ câ‚, câ‚‚ : classes â€¢ câ‚ â‰  câ‚‚ â‡’ câ‚.name â‰  câ‚‚.name           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Metrics)

### 3.1 ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BasicMetrics                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOM : Class â†’ â„•                    -- Number of Methods      â”‚
â”‚ NOF : Class â†’ â„•                    -- Number of Fields       â”‚
â”‚ NOA : Class â†’ â„•                    -- Number of Attributes   â”‚
â”‚ LOC : Class â†’ â„•                    -- Lines of Code          â”‚
â”‚ NOI : Method â†’ â„•                   -- Number of Instructions â”‚
â”‚ NOP : Method â†’ â„•                   -- Number of Parameters   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   NOM(c) = #(c.methods)                                      â”‚
â”‚   NOF(c) = #(c.attributes)                                   â”‚
â”‚   NOA(c) = #({a : c.attributes | Â¬a.isComputed})             â”‚
â”‚   LOC(c) = c.loc                                             â”‚
â”‚                                                              â”‚
â”‚ âˆ€ m : Method â€¢                                               â”‚
â”‚   NOI(m) = #(m.instructions)                                 â”‚
â”‚   NOP(m) = #(m.parameters)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Weighted Methods per Class (WMC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WMC_Metric                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WMC : Class â†’ â„•                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   WMC(c) = Î£{m : c.methods â€¢ m.cyclomaticComplexity}         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Lack of Cohesion of Methods (LCOM)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LCOM_Metric                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LCOM : Class â†’ â„                                             â”‚
â”‚ methodAttributeAccess : Method Ã— Attribute â†’ ğ”¹               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ -- LCOM4: Ğ³Ñ€Ğ°Ñ„ ÑĞ²ÑĞ·Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Ğ¾Ğ±Ñ‰Ğ¸Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹        â”‚
â”‚                                                              â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   let M == c.methods                                         â”‚
â”‚       A == c.attributes                                      â”‚
â”‚       accessMatrix == {(m,a) : M Ã— A | a âˆˆ m.accessedAttributes} â”‚
â”‚   in                                                         â”‚
â”‚     -- P = Ğ¿Ğ°Ñ€Ñ‹ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² Ğ‘Ğ•Ğ— Ğ¾Ğ±Ñ‰Ğ¸Ñ… Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ²                  â”‚
â”‚     -- Q = Ğ¿Ğ°Ñ€Ñ‹ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² Ğ¡ Ğ¾Ğ±Ñ‰Ğ¸Ğ¼Ğ¸ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ°Ğ¼Ğ¸                  â”‚
â”‚     let P == {(mâ‚,mâ‚‚) : M Ã— M | mâ‚ â‰  mâ‚‚ âˆ§                   â”‚
â”‚               mâ‚.accessedAttributes âˆ© mâ‚‚.accessedAttributes = âˆ…} â”‚
â”‚         Q == {(mâ‚,mâ‚‚) : M Ã— M | mâ‚ â‰  mâ‚‚ âˆ§                   â”‚
â”‚               mâ‚.accessedAttributes âˆ© mâ‚‚.accessedAttributes â‰  âˆ…} â”‚
â”‚     in                                                       â”‚
â”‚       LCOM(c) = max(0, #P - #Q)                              â”‚
â”‚                                                              â”‚
â”‚ -- ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾ LCOM5 (Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ 0..1):               â”‚
â”‚ LCOM5 : Class â†’ â„                                            â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   let m == #(c.methods)                                      â”‚
â”‚       a == #(c.attributes)                                   â”‚
â”‚       sumAccess == Î£{attr : c.attributes â€¢                   â”‚
â”‚                      #{meth : c.methods | attr âˆˆ meth.accessedAttributes}} â”‚
â”‚   in                                                         â”‚
â”‚     a = 0 âˆ¨ m â‰¤ 1 â‡’ LCOM5(c) = 0                            â”‚
â”‚     a > 0 âˆ§ m > 1 â‡’ LCOM5(c) = (m - sumAccess/a) / (m - 1)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Coupling Between Objects (CBO)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CBO_Metric                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CBO : Class â†’ â„•                                              â”‚
â”‚ uses : Class â†” Class                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   uses(c) = {c' : Class | c â‰  c' âˆ§                           â”‚
â”‚     (âˆƒ m : c.methods â€¢ âˆƒ m' : c'.methods â€¢ m' âˆˆ m.calledMethods) âˆ¨ â”‚
â”‚     (âˆƒ a : c.attributes â€¢ a.type = c') âˆ¨                     â”‚
â”‚     (âˆƒ m : c.methods â€¢ âˆƒ p : m.parameters â€¢ p.type = c')}    â”‚
â”‚                                                              â”‚
â”‚   CBO(c) = #{c' : Class | (c,c') âˆˆ uses âˆ¨ (c',c) âˆˆ uses}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 Depth of Inheritance Tree (DIT)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DIT_Metric                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DIT : Class â†’ â„•                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   c.parent = âˆ… â‡’ DIT(c) = 0                                  â”‚
â”‚   c.parent â‰  âˆ… â‡’ DIT(c) = 1 + DIT(c.parent)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 Tight Class Cohesion (TCC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TCC_Metric                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TCC : Class â†’ â„                                              â”‚
â”‚ directlyConnected : Method Ã— Method â†’ ğ”¹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   let visibleMethods == {m : c.methods |                     â”‚
â”‚                          m.accessLevel âˆˆ {public, open, internal}} â”‚
â”‚       n == #visibleMethods                                   â”‚
â”‚       maxPairs == n Ã— (n-1) / 2                              â”‚
â”‚       connectedPairs == #{(mâ‚,mâ‚‚) : visibleMethods Ã— visibleMethods | â”‚
â”‚                          mâ‚ â‰  mâ‚‚ âˆ§                           â”‚
â”‚                          mâ‚.accessedAttributes âˆ© mâ‚‚.accessedAttributes â‰  âˆ…} â”‚
â”‚   in                                                         â”‚
â”‚     n â‰¤ 1 â‡’ TCC(c) = 1.0                                     â”‚
â”‚     n > 1 â‡’ TCC(c) = connectedPairs / maxPairs               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.7 Access to Foreign Data (ATFD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ATFD_Metric                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ATFD : Class â†’ â„•                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   ATFD(c) = #{a : Attribute |                                â”‚
â”‚              a âˆ‰ c.attributes âˆ§                              â”‚
â”‚              âˆƒ m : c.methods â€¢ a âˆˆ m.foreignDataAccess}      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.8 Weight of class that is Accessible (WOA)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WOA_Metric                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WOA : Class â†’ â„                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   let publicMembers == #{m : c.methods | m.accessLevel âˆˆ {public, open}} + â”‚
â”‚                        #{a : c.attributes | a.accessLevel âˆˆ {public, open}} â”‚
â”‚       totalMembers == #(c.methods) + #(c.attributes)         â”‚
â”‚   in                                                         â”‚
â”‚     totalMembers = 0 â‡’ WOA(c) = 0                            â”‚
â”‚     totalMembers > 0 â‡’ WOA(c) = publicMembers / totalMembers â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ĞŸĞ¾Ñ€Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ (Thresholds)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Thresholds                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ -- God Class / Massive View Controller                       â”‚
â”‚ Î¸_WMC_GodClass : â„•                                           â”‚
â”‚ Î¸_TCC_GodClass : â„                                           â”‚
â”‚ Î¸_ATFD_GodClass : â„•                                          â”‚
â”‚ Î¸_LOC_GodClass : â„•                                           â”‚
â”‚                                                              â”‚
â”‚ -- Multifaceted Abstraction                                  â”‚
â”‚ Î¸_LCOM_MFA : â„                                               â”‚
â”‚ Î¸_WMC_MFA : â„•                                                â”‚
â”‚ Î¸_NOF_MFA : â„•                                                â”‚
â”‚ Î¸_NOM_MFA : â„•                                                â”‚
â”‚                                                              â”‚
â”‚ -- Deficient Encapsulation                                   â”‚
â”‚ Î¸_WOA_DE : â„                                                 â”‚
â”‚                                                              â”‚
â”‚ -- Long Method                                               â”‚
â”‚ Î¸_LOC_LongMethod : â„•                                         â”‚
â”‚ Î¸_CC_LongMethod : â„•                                          â”‚
â”‚ Î¸_NOI_LongMethod : â„•                                         â”‚
â”‚                                                              â”‚
â”‚ -- Lazy Class                                                â”‚
â”‚ Î¸_NOM_LazyClass : â„•                                          â”‚
â”‚ Î¸_NOF_LazyClass : â„•                                          â”‚
â”‚ Î¸_DIT_LazyClass : â„•                                          â”‚
â”‚                                                              â”‚
â”‚ -- Message Chain                                             â”‚
â”‚ Î¸_ChainLength : â„•                                            â”‚
â”‚                                                              â”‚
â”‚ -- Broken Hierarchy                                          â”‚
â”‚ Î¸_DIT_BrokenHierarchy : â„•                                    â”‚
â”‚                                                              â”‚
â”‚ -- Cyclic Dependencies                                       â”‚
â”‚ Î¸_CycleLength : â„•                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ -- Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ (Ğ°ĞºĞ°Ğ´ĞµĞ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ + Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ)      â”‚
â”‚ Î¸_WMC_GodClass = 47                                          â”‚
â”‚ Î¸_TCC_GodClass = 0.33                                        â”‚
â”‚ Î¸_ATFD_GodClass = 5                                          â”‚
â”‚ Î¸_LOC_GodClass = 500                                         â”‚
â”‚                                                              â”‚
â”‚ Î¸_LCOM_MFA = 0.725                                           â”‚
â”‚ Î¸_WMC_MFA = 34                                               â”‚
â”‚ Î¸_NOF_MFA = 8                                                â”‚
â”‚ Î¸_NOM_MFA = 14                                               â”‚
â”‚                                                              â”‚
â”‚ Î¸_WOA_DE = 0.3                                               â”‚
â”‚                                                              â”‚
â”‚ Î¸_LOC_LongMethod = 50                                        â”‚
â”‚ Î¸_CC_LongMethod = 10                                         â”‚
â”‚ Î¸_NOI_LongMethod = 30                                        â”‚
â”‚                                                              â”‚
â”‚ Î¸_NOM_LazyClass = 5                                          â”‚
â”‚ Î¸_NOF_LazyClass = 5                                          â”‚
â”‚ Î¸_DIT_LazyClass = 2                                          â”‚
â”‚                                                              â”‚
â”‚ Î¸_ChainLength = 3                                            â”‚
â”‚                                                              â”‚
â”‚ Î¸_DIT_BrokenHierarchy = 3                                    â”‚
â”‚                                                              â”‚
â”‚ Î¸_CycleLength = 2                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Ğ”ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€Ñ‹ Ğ´ĞµÑ„ĞµĞºÑ‚Ğ¾Ğ² (Smell Detectors)

### 5.1 God Class Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GodClassDetector                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isGodClass : Class â†’ ğ”¹                                       â”‚
â”‚ godClassSeverity : Class â†’ â„                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   isGodClass(c) â‡”                                            â”‚
â”‚     ATFD(c) > Î¸_ATFD_GodClass âˆ§                              â”‚
â”‚     WMC(c) â‰¥ Î¸_WMC_GodClass âˆ§                                â”‚
â”‚     TCC(c) < Î¸_TCC_GodClass                                  â”‚
â”‚                                                              â”‚
â”‚ -- Ğ¡Ñ‚ĞµĞ¿ĞµĞ½ÑŒ ÑĞµÑ€ÑŒĞµĞ·Ğ½Ğ¾ÑÑ‚Ğ¸ (0..1, Ñ‡ĞµĞ¼ Ğ²Ñ‹ÑˆĞµ â€” Ñ‚ĞµĞ¼ Ñ…ÑƒĞ¶Ğµ)           â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   godClassSeverity(c) =                                      â”‚
â”‚     (min(1, ATFD(c) / (2 Ã— Î¸_ATFD_GodClass)) +               â”‚
â”‚      min(1, WMC(c) / (2 Ã— Î¸_WMC_GodClass)) +                 â”‚
â”‚      max(0, (Î¸_TCC_GodClass - TCC(c)) / Î¸_TCC_GodClass)) / 3 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Massive View Controller Detector (iOS-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğ¹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MassiveViewControllerDetector                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isMassiveVC : Class â†’ ğ”¹                                      â”‚
â”‚ vcComplexityScore : Class â†’ â„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   isMassiveVC(c) â‡”                                           â”‚
â”‚     c.isViewController âˆ§                                     â”‚
â”‚     (LOC(c) > Î¸_LOC_GodClass âˆ¨                               â”‚
â”‚      NOM(c) > 20 âˆ¨                                           â”‚
â”‚      NOA(c) > 15 âˆ¨                                           â”‚
â”‚      WMC(c) > Î¸_WMC_GodClass)                                â”‚
â”‚                                                              â”‚
â”‚ -- ĞÑ†ĞµĞ½ĞºĞ° ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ViewController                           â”‚
â”‚ âˆ€ c : Class | c.isViewController â€¢                           â”‚
â”‚   vcComplexityScore(c) =                                     â”‚
â”‚     (LOC(c) / Î¸_LOC_GodClass) Ã— 0.3 +                        â”‚
â”‚     (NOM(c) / 20) Ã— 0.25 +                                   â”‚
â”‚     (NOA(c) / 15) Ã— 0.2 +                                    â”‚
â”‚     (WMC(c) / Î¸_WMC_GodClass) Ã— 0.25                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Multifaceted Abstraction Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MultifacetedAbstractionDetector                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isMultifacetedAbstraction : Class â†’ ğ”¹                        â”‚
â”‚ cohesionScore : Class â†’ â„                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   isMultifacetedAbstraction(c) â‡”                             â”‚
â”‚     LCOM5(c) > Î¸_LCOM_MFA âˆ§                                  â”‚
â”‚     (WMC(c) â‰¥ Î¸_WMC_MFA âˆ¨                                    â”‚
â”‚      NOF(c) â‰¥ Î¸_NOF_MFA âˆ¨                                    â”‚
â”‚      NOM(c) â‰¥ Î¸_NOM_MFA)                                     â”‚
â”‚                                                              â”‚
â”‚ -- ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ²ÑĞ·Ğ½Ğ¾ÑÑ‚Ğ¸ (Ğ¸Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ LCOM)               â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   cohesionScore(c) = 1 - LCOM5(c)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 Deficient Encapsulation Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DeficientEncapsulationDetector                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hasDeficientEncapsulation : Class â†’ ğ”¹                        â”‚
â”‚ exposedPublicFields : Class â†’ â„™ Attribute                    â”‚
â”‚ encapsulationScore : Class â†’ â„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   exposedPublicFields(c) = {a : c.attributes |               â”‚
â”‚     a.accessLevel âˆˆ {public, open} âˆ§                         â”‚
â”‚     Â¬a.isComputed âˆ§                                          â”‚
â”‚     a.hasSetter}                                             â”‚
â”‚                                                              â”‚
â”‚   hasDeficientEncapsulation(c) â‡”                             â”‚
â”‚     WOA(c) > Î¸_WOA_DE âˆ¨                                      â”‚
â”‚     #(exposedPublicFields(c)) > 3                            â”‚
â”‚                                                              â”‚
â”‚ -- ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¸Ğ½ĞºĞ°Ğ¿ÑÑƒĞ»ÑÑ†Ğ¸Ğ¸ (0..1, Ñ‡ĞµĞ¼ Ğ²Ñ‹ÑˆĞµ â€” Ñ‚ĞµĞ¼ Ğ»ÑƒÑ‡ÑˆĞµ)      â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   encapsulationScore(c) = 1 - WOA(c)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 Long Method Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LongMethodDetector                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isLongMethod : Method â†’ ğ”¹                                    â”‚
â”‚ methodComplexity : Method â†’ â„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ m : Method â€¢                                               â”‚
â”‚   isLongMethod(m) â‡”                                          â”‚
â”‚     m.loc > Î¸_LOC_LongMethod âˆ¨                               â”‚
â”‚     NOI(m) > Î¸_NOI_LongMethod âˆ¨                              â”‚
â”‚     m.cyclomaticComplexity > Î¸_CC_LongMethod                 â”‚
â”‚                                                              â”‚
â”‚ -- ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ°Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ° ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°                       â”‚
â”‚ âˆ€ m : Method â€¢                                               â”‚
â”‚   methodComplexity(m) =                                      â”‚
â”‚     (m.loc / Î¸_LOC_LongMethod) Ã— 0.4 +                       â”‚
â”‚     (m.cyclomaticComplexity / Î¸_CC_LongMethod) Ã— 0.4 +       â”‚
â”‚     (m.nestingDepth / 4) Ã— 0.2                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.6 Lazy Class Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LazyClassDetector                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isLazyClass : Class â†’ ğ”¹                                      â”‚
â”‚ classUtility : Class â†’ â„                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   isLazyClass(c) â‡”                                           â”‚
â”‚     (NOM(c) < Î¸_NOM_LazyClass âˆ§ NOF(c) < Î¸_NOF_LazyClass) âˆ¨  â”‚
â”‚     (DIT(c) > 0 âˆ§ DIT(c) < Î¸_DIT_LazyClass âˆ§                 â”‚
â”‚      NOM(c) < Î¸_NOM_LazyClass)                               â”‚
â”‚                                                              â”‚
â”‚ -- ĞÑ†ĞµĞ½ĞºĞ° Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ¾ÑÑ‚Ğ¸ ĞºĞ»Ğ°ÑÑĞ°                                  â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   classUtility(c) =                                          â”‚
â”‚     (NOM(c) / Î¸_NOM_LazyClass) Ã— 0.5 +                       â”‚
â”‚     (NOF(c) / Î¸_NOF_LazyClass) Ã— 0.3 +                       â”‚
â”‚     (WMC(c) / 10) Ã— 0.2                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.7 Data Class Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DataClassDetector                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isDataClass : Class â†’ ğ”¹                                      â”‚
â”‚ dataClassScore : Class â†’ â„                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   let publicGetters == #{a : c.attributes |                  â”‚
â”‚                          a.accessLevel âˆˆ {public, open} âˆ§ a.hasGetter} â”‚
â”‚       publicSetters == #{a : c.attributes |                  â”‚
â”‚                          a.accessLevel âˆˆ {public, open} âˆ§ a.hasSetter} â”‚
â”‚       complexMethods == #{m : c.methods |                    â”‚
â”‚                           m.cyclomaticComplexity > 2 âˆ§       â”‚
â”‚                           m.name âˆ‰ {"init", "deinit"}}       â”‚
â”‚   in                                                         â”‚
â”‚     isDataClass(c) â‡”                                         â”‚
â”‚       NOF(c) > 5 âˆ§                                           â”‚
â”‚       (publicGetters + publicSetters) / (2 Ã— NOF(c)) > 0.7 âˆ§ â”‚
â”‚       complexMethods < 3 âˆ§                                   â”‚
â”‚       LCOM5(c) > 0.8                                         â”‚
â”‚                                                              â”‚
â”‚ -- ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ "Ğ´Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ" ĞºĞ»Ğ°ÑÑĞ°                              â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   dataClassScore(c) =                                        â”‚
â”‚     let accessorRatio == (publicGetters + publicSetters) / max(1, 2 Ã— NOF(c)) â”‚
â”‚     in accessorRatio Ã— (1 - min(1, complexMethods / 5)) Ã— LCOM5(c) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.8 Message Chain Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MessageChainDetector                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MessageChain ::= seq MethodCall                              â”‚
â”‚ MethodCall == Method Ã— Class                                 â”‚
â”‚                                                              â”‚
â”‚ messageChains : Method â†’ â„™ MessageChain                      â”‚
â”‚ maxChainLength : Method â†’ â„•                                  â”‚
â”‚ hasMessageChain : Method â†’ ğ”¹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ m : Method â€¢                                               â”‚
â”‚   maxChainLength(m) = max({#chain : chain âˆˆ messageChains(m)}) â”‚
â”‚                                                              â”‚
â”‚   hasMessageChain(m) â‡” maxChainLength(m) > Î¸_ChainLength     â”‚
â”‚                                                              â”‚
â”‚ -- Ğ”ĞµÑ‚ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· AST Ğ½Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ           â”‚
â”‚ -- member access expressions: a.b.c.d â†’ Ğ´Ğ»Ğ¸Ğ½Ğ° 4              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.9 Feature Envy Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FeatureEnvyDetector                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hasFeatureEnvy : Method â†’ ğ”¹                                  â”‚
â”‚ enviedClass : Method â†’ Class âˆª {âˆ…}                           â”‚
â”‚ localAccess : Method â†’ â„•                                     â”‚
â”‚ foreignAccess : Method Ã— Class â†’ â„•                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ m : Method, c : Class | m âˆˆ c.methods â€¢                    â”‚
â”‚   localAccess(m) = #{a : c.attributes | a âˆˆ m.accessedAttributes} â”‚
â”‚                                                              â”‚
â”‚   âˆ€ c' : Class | c' â‰  c â€¢                                    â”‚
â”‚     foreignAccess(m, c') = #{a : c'.attributes | a âˆˆ m.foreignDataAccess} â”‚
â”‚                                                              â”‚
â”‚   hasFeatureEnvy(m) â‡”                                        â”‚
â”‚     âˆƒ c' : Class | c' â‰  c â€¢                                  â”‚
â”‚       foreignAccess(m, c') > localAccess(m) âˆ§                â”‚
â”‚       foreignAccess(m, c') > 3                               â”‚
â”‚                                                              â”‚
â”‚   enviedClass(m) =                                           â”‚
â”‚     if hasFeatureEnvy(m)                                     â”‚
â”‚     then Î¼ c' : Class | foreignAccess(m, c') =               â”‚
â”‚          max({foreignAccess(m, c'') : c'' : Class})          â”‚
â”‚     else âˆ…                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.10 Broken Hierarchy Detector (Refused Parent Bequest)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BrokenHierarchyDetector                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hasBrokenHierarchy : Class â†’ ğ”¹                               â”‚
â”‚ refusedMethods : Class â†’ â„™ Method                            â”‚
â”‚ inheritanceRatio : Class â†’ â„                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ€ c : Class | c.parent â‰  âˆ… â€¢                                 â”‚
â”‚   let overriddenMethods == {m : c.methods |                  â”‚
â”‚                             âˆƒ pm : c.parent.methods â€¢ m.name = pm.name} â”‚
â”‚       methodsUsingSuperImpl == {m : overriddenMethods |      â”‚
â”‚                                 callsSuper(m)}               â”‚
â”‚   in                                                         â”‚
â”‚     refusedMethods(c) = overriddenMethods \ methodsUsingSuperImpl â”‚
â”‚                                                              â”‚
â”‚     inheritanceRatio(c) =                                    â”‚
â”‚       if #(c.parent.methods) = 0 then 1.0                    â”‚
â”‚       else #(methodsUsingSuperImpl) / #(overriddenMethods)   â”‚
â”‚                                                              â”‚
â”‚     hasBrokenHierarchy(c) â‡”                                  â”‚
â”‚       DIT(c) > Î¸_DIT_BrokenHierarchy âˆ§                       â”‚
â”‚       inheritanceRatio(c) < 0.33 âˆ§                           â”‚
â”‚       #(refusedMethods(c)) > 2                               â”‚
â”‚                                                              â”‚
â”‚ -- Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ                                   â”‚
â”‚ callsSuper : Method â†’ ğ”¹                                      â”‚
â”‚ âˆ€ m : Method â€¢                                               â”‚
â”‚   callsSuper(m) â‡” âˆƒ call âˆˆ m.instructions â€¢ isSuperCall(call) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.11 Cyclic Dependencies Detector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CyclicDependencyDetector                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ dependencyGraph : Class â†” Class                              â”‚
â”‚ cycles : â„™ (seq Class)                                       â”‚
â”‚ hasCyclicDependency : Class â†’ ğ”¹                              â”‚
â”‚ cyclicPartners : Class â†’ â„™ Class                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ -- ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ñ„Ğ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹                             â”‚
â”‚ âˆ€ câ‚, câ‚‚ : Class â€¢                                           â”‚
â”‚   (câ‚, câ‚‚) âˆˆ dependencyGraph â‡”                               â”‚
â”‚     câ‚ â‰  câ‚‚ âˆ§                                                â”‚
â”‚     (âˆƒ a : câ‚.attributes â€¢ a.type = câ‚‚ âˆ¨                     â”‚
â”‚      âˆƒ m : câ‚.methods, p : m.parameters â€¢ p.type = câ‚‚ âˆ¨      â”‚
â”‚      âˆƒ m : câ‚.methods, m' : câ‚‚.methods â€¢ m' âˆˆ m.calledMethods âˆ¨ â”‚
â”‚      câ‚.parent = câ‚‚)                                         â”‚
â”‚                                                              â”‚
â”‚ -- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ†Ğ¸ĞºĞ»Ğ° (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ĞºĞ»Ğ°ÑÑĞ¾Ğ²)            â”‚
â”‚ Cycle ::= {path : seq Class |                                â”‚
â”‚            #path â‰¥ 2 âˆ§                                       â”‚
â”‚            head(path) = last(path) âˆ§                         â”‚
â”‚            âˆ€ i : 1..#path-1 â€¢ (path(i), path(i+1)) âˆˆ dependencyGraph} â”‚
â”‚                                                              â”‚
â”‚ cycles = {cycle : Cycle | isMiminmal(cycle)}                 â”‚
â”‚                                                              â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   hasCyclicDependency(c) â‡” âˆƒ cycle âˆˆ cycles â€¢ c âˆˆ ran(cycle) â”‚
â”‚                                                              â”‚
â”‚   cyclicPartners(c) = {c' : Class |                          â”‚
â”‚                        âˆƒ cycle âˆˆ cycles â€¢ c âˆˆ ran(cycle) âˆ§ c' âˆˆ ran(cycle)} â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ĞĞ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### 6.1 Ğ”ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€ Ğ²ÑĞµÑ… Ğ·Ğ°Ğ¿Ğ°Ñ…Ğ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProjectSmellAnalyzer                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ project : SwiftProject                                       â”‚
â”‚                                                              â”‚
â”‚ SmellType ::= GodClass | MassiveVC | MultifacetedAbstraction â”‚
â”‚             | DeficientEncapsulation | LongMethod | LazyClass â”‚
â”‚             | DataClass | MessageChain | FeatureEnvy         â”‚
â”‚             | BrokenHierarchy | CyclicDependency             â”‚
â”‚                                                              â”‚
â”‚ SmellInstance == SmellType Ã— (Class âˆª Method) Ã— â„            â”‚
â”‚ -- (Ñ‚Ğ¸Ğ¿ Ğ·Ğ°Ğ¿Ğ°Ñ…Ğ°, ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚, ÑĞµÑ€ÑŒĞµĞ·Ğ½Ğ¾ÑÑ‚ÑŒ 0..1)                   â”‚
â”‚                                                              â”‚
â”‚ detectedSmells : â„™ SmellInstance                             â”‚
â”‚ classSmells : Class â†’ â„™ SmellInstance                        â”‚
â”‚ methodSmells : Method â†’ â„™ SmellInstance                      â”‚
â”‚ projectHealthScore : â„                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ detectedSmells =                                             â”‚
â”‚   {(GodClass, c, godClassSeverity(c)) :                      â”‚
â”‚      c âˆˆ project.classes | isGodClass(c)} âˆª                  â”‚
â”‚   {(MassiveVC, c, vcComplexityScore(c)) :                    â”‚
â”‚      c âˆˆ project.classes | isMassiveVC(c)} âˆª                 â”‚
â”‚   {(MultifacetedAbstraction, c, LCOM5(c)) :                  â”‚
â”‚      c âˆˆ project.classes | isMultifacetedAbstraction(c)} âˆª   â”‚
â”‚   {(DeficientEncapsulation, c, WOA(c)) :                     â”‚
â”‚      c âˆˆ project.classes | hasDeficientEncapsulation(c)} âˆª   â”‚
â”‚   {(LazyClass, c, 1 - classUtility(c)) :                     â”‚
â”‚      c âˆˆ project.classes | isLazyClass(c)} âˆª                 â”‚
â”‚   {(DataClass, c, dataClassScore(c)) :                       â”‚
â”‚      c âˆˆ project.classes | isDataClass(c)} âˆª                 â”‚
â”‚   {(BrokenHierarchy, c, 1 - inheritanceRatio(c)) :           â”‚
â”‚      c âˆˆ project.classes | hasBrokenHierarchy(c)} âˆª          â”‚
â”‚   {(CyclicDependency, c, 1.0) :                              â”‚
â”‚      c âˆˆ project.classes | hasCyclicDependency(c)} âˆª         â”‚
â”‚   {(LongMethod, m, methodComplexity(m)) :                    â”‚
â”‚      c âˆˆ project.classes, m âˆˆ c.methods | isLongMethod(m)} âˆª â”‚
â”‚   {(MessageChain, m, maxChainLength(m) / 10) :               â”‚
â”‚      c âˆˆ project.classes, m âˆˆ c.methods | hasMessageChain(m)} âˆª â”‚
â”‚   {(FeatureEnvy, m, 0.8) :                                   â”‚
â”‚      c âˆˆ project.classes, m âˆˆ c.methods | hasFeatureEnvy(m)} â”‚
â”‚                                                              â”‚
â”‚ âˆ€ c : Class â€¢                                                â”‚
â”‚   classSmells(c) = {si : detectedSmells | second(si) = c}    â”‚
â”‚                                                              â”‚
â”‚ âˆ€ m : Method â€¢                                               â”‚
â”‚   methodSmells(m) = {si : detectedSmells | second(si) = m}   â”‚
â”‚                                                              â”‚
â”‚ -- ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (0..1, Ğ²Ñ‹ÑˆĞµ = Ğ»ÑƒÑ‡ÑˆĞµ)    â”‚
â”‚ projectHealthScore =                                         â”‚
â”‚   let totalClasses == #(project.classes)                     â”‚
â”‚       totalMethods == Î£{c : project.classes â€¢ NOM(c)}        â”‚
â”‚       smellCount == #detectedSmells                          â”‚
â”‚       weightedSmellScore == Î£{(_, _, sev) âˆˆ detectedSmells â€¢ sev} â”‚
â”‚   in                                                         â”‚
â”‚     1 - (weightedSmellScore / (totalClasses + totalMethods)) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AnalyzeProject                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Î”ProjectSmellAnalyzer                                        â”‚
â”‚ sourceFiles? : â„™ SOURCE_CODE                                 â”‚
â”‚ thresholdConfig? : Thresholds                                â”‚
â”‚ report! : SmellReport                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ -- 1. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ° â†’ AST â†’ ĞºĞ»Ğ°ÑÑÑ‹, Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹         â”‚
â”‚ project'.classes = parseClasses(sourceFiles?)                â”‚
â”‚ project'.dependencies = extractDependencies(project'.classes) â”‚
â”‚                                                              â”‚
â”‚ -- 2. Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²                  â”‚
â”‚ âˆ€ c : project'.classes â€¢                                     â”‚
â”‚   computeMetrics(c, thresholdConfig?)                        â”‚
â”‚                                                              â”‚
â”‚ -- 3. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²                                      â”‚
â”‚ detectedSmells' = runAllDetectors(project', thresholdConfig?) â”‚
â”‚                                                              â”‚
â”‚ -- 4. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ°                                       â”‚
â”‚ report! = generateReport(detectedSmells', projectHealthScore') â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SmellReport ::= âŸ¨                                              
  totalSmells : â„•,                                             
  smellsByType : SmellType â†’ â„•,                                
  smellsByClass : Class â†’ â„™ SmellInstance,                     
  criticalSmells : â„™ SmellInstance,                            
  healthScore : â„,                                             
  recommendations : seq String                                 
âŸ©                                                              
```

---

## 7. ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñ‹ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Ğ¿ÑĞµĞ²Ğ´Ğ¾ĞºĞ¾Ğ´)

### 7.1 ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ LCOM5

```
Algorithm: ComputeLCOM5(class)
Input: class : Class
Output: lcom : â„ âˆˆ [0, 1]

1.  methods â† class.methods
2.  attributes â† class.attributes
3.  m â† |methods|
4.  a â† |attributes|
5.  
6.  if a = 0 or m â‰¤ 1 then
7.      return 0
8.  end if
9.  
10. sumAccess â† 0
11. for each attr in attributes do
12.     accessCount â† |{meth âˆˆ methods : attr âˆˆ meth.accessedAttributes}|
13.     sumAccess â† sumAccess + accessCount
14. end for
15. 
16. lcom â† (m - sumAccess/a) / (m - 1)
17. return max(0, min(1, lcom))
```

### 7.2 ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ God Class

```
Algorithm: DetectGodClass(class, thresholds)
Input: class : Class, thresholds : Thresholds
Output: (isSmell : ğ”¹, severity : â„)

1.  atfd â† ComputeATFD(class)
2.  wmc â† ComputeWMC(class)
3.  tcc â† ComputeTCC(class)
4.  
5.  isSmell â† (atfd > thresholds.Î¸_ATFD_GodClass) âˆ§
6.             (wmc â‰¥ thresholds.Î¸_WMC_GodClass) âˆ§
7.             (tcc < thresholds.Î¸_TCC_GodClass)
8.  
9.  if isSmell then
10.     s1 â† min(1, atfd / (2 Ã— thresholds.Î¸_ATFD_GodClass))
11.     s2 â† min(1, wmc / (2 Ã— thresholds.Î¸_WMC_GodClass))
12.     s3 â† max(0, (thresholds.Î¸_TCC_GodClass - tcc) / thresholds.Î¸_TCC_GodClass)
13.     severity â† (s1 + s2 + s3) / 3
14. else
15.     severity â† 0
16. end if
17. 
18. return (isSmell, severity)
```

### 7.3 ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ (DFS)

```
Algorithm: DetectCycles(project)
Input: project : SwiftProject
Output: cycles : â„™ (seq Class)

1.  graph â† BuildDependencyGraph(project.classes)
2.  visited â† âˆ…
3.  recStack â† âˆ…
4.  cycles â† âˆ…
5.  
6.  for each class in project.classes do
7.      if class âˆ‰ visited then
8.          DFSCycle(class, graph, visited, recStack, [], cycles)
9.      end if
10. end for
11. 
12. return cycles

Procedure: DFSCycle(node, graph, visited, recStack, path, cycles)
1.  visited â† visited âˆª {node}
2.  recStack â† recStack âˆª {node}
3.  path â† path âŒ¢ âŸ¨nodeâŸ©
4.  
5.  for each neighbor in graph.adjacency(node) do
6.      if neighbor âˆ‰ visited then
7.          DFSCycle(neighbor, graph, visited, recStack, path, cycles)
8.      else if neighbor âˆˆ recStack then
9.          -- ĞĞ°Ğ¹Ğ´ĞµĞ½ Ñ†Ğ¸ĞºĞ»
10.         cycleStart â† indexOf(path, neighbor)
11.         cycle â† path[cycleStart..] âŒ¢ âŸ¨neighborâŸ©
12.         cycles â† cycles âˆª {cycle}
13.     end if
14. end for
15. 
16. recStack â† recStack \ {node}
```

### 7.4 ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Message Chain (AST traversal)

```
Algorithm: DetectMessageChains(method)
Input: method : Method
Output: chains : â„™ (seq MethodCall)

1.  ast â† ParseMethodAST(method)
2.  chains â† âˆ…
3.  
4.  for each expr in TraverseExpressions(ast) do
5.      if expr.type = MemberAccessExpression then
6.          chain â† ExtractChain(expr)
7.          if |chain| > Î¸_ChainLength then
8.              chains â† chains âˆª {chain}
9.          end if
10.     end if
11. end for
12. 
13. return chains

Function: ExtractChain(expr)
1.  chain â† âŸ¨âŸ©
2.  current â† expr
3.  
4.  while current.type = MemberAccessExpression do
5.      chain â† âŸ¨current.memberâŸ© âŒ¢ chain
6.      current â† current.base
7.  end while
8.  
9.  return chain
```

---

## 8. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ SwiftLint

```yaml
# .swiftlint.yml - ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Z-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸

# God Class / Large Class detection
type_body_length:
  warning: 250      # ~ Î¸_LOC_GodClass / 2
  error: 500        # Î¸_LOC_GodClass

file_length:
  warning: 400
  error: 750

# Long Method detection  
function_body_length:
  warning: 50       # Î¸_LOC_LongMethod
  error: 100

# Cyclomatic Complexity
cyclomatic_complexity:
  warning: 10       # Î¸_CC_LongMethod
  error: 20
  ignores_case_statements: true

# Nesting depth (Ğ´Ğ»Ñ Brain Method)
nesting:
  type_level: 2
  function_level: 4

# Large tuple (indicator of Data Class)
large_tuple:
  warning: 3
  error: 5

# Function parameter count
function_parameter_count:
  warning: 5
  error: 8

# Closure body length
closure_body_length:
  warning: 30
  error: 50
```

---

## 9. Ğ¡Ğ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Z-Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

| Z-ÑÑ…ĞµĞ¼Ğ° | Swift Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ |
|---------|------------------|------------|
| `LCOM5(c)` | `LCOMCalculator.calculate(class:)` | GraphifySwift |
| `WMC(c)` | `Î£ cyclomaticComplexity` | SwiftLint + custom |
| `CBO(c)` | `CouplingAnalyzer.analyze(class:)` | GraphifySwift |
| `isGodClass(c)` | `GodClassDetector.detect(class:)` | Sumac |
| `isMassiveVC(c)` | `MVCDetector.detect(viewController:)` | Sumac |
| `hasCyclicDependency(c)` | `CycleDetector.findCycles(graph:)` | Custom + Neo4j |
| `hasMessageChain(m)` | `ChainAnalyzer.analyze(method:)` | GraphifySwift |

---

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ

1. **Ğ¡Ğ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Z-Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¸:**
   - `â„™ X` â€” Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ Ğ²ÑĞµÑ… Ğ¿Ğ¾Ğ´Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ² X (powerset)
   - `X â†” Y` â€” Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ X Ğ¸ Y
   - `X â†’ Y` â€” Ñ‚Ğ¾Ñ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ
   - `seq X` â€” Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² X
   - `#S` â€” Ğ¼Ğ¾Ñ‰Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° S
   - `dom R`, `ran R` â€” Ğ´Ğ¾Ğ¼ĞµĞ½ Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ· Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ
   - `âŒ¢` â€” ĞºĞ¾Ğ½ĞºĞ°Ñ‚ĞµĞ½Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹
   - `Î£` â€” ÑÑƒĞ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
   - `Î¼` â€” Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ (ĞµĞ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚)

2. **ĞŸĞ¾Ñ€Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ** Ğ²Ğ·ÑÑ‚Ñ‹ Ğ¸Ğ·:
   - Lanza & Marinescu "Object-Oriented Metrics in Practice"
   - Chidamber & Kemerer metrics suite
   - Habchi et al. iOS empirical studies
   - SwiftLint default configurations

3. **ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Swift:**
   - Ğ£Ñ‡Ñ‚ĞµĞ½Ñ‹ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ñ‹ Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
   - `isViewController` Ğ´Ğ»Ñ iOS-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº
   - Access levels ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹ Ğ´Ğ»Ñ Swift (fileprivate, internal, open)